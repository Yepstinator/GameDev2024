import random

def intro():
    print("Welcome to the Dungeon Adventure!")
    print("You are in a dark dungeon filled with treasures and dangers.")
    print("Can you find the treasure and escape?")

def choose_direction():
    direction = input("Which direction will you go? (left/right/straight): ").lower()
    return direction

def encounter():
    events = ["You found a treasure chest!", "A monster appears!", "You stumbled upon a hidden passage!"]
    return random.choice(events)

def main():
    intro()
    
    treasures_collected = 0
    encounters_faced = 0
    
    while True:
        direction = choose_direction()
        encounters_faced += 1
        event = encounter()
        
        print(event)
        
        if "treasure" in event:
            treasures_collected += 1
            print("You collect the treasure! Total treasures: ", treasures_collected)
        
        if "monster" in event:
            print("You have to fight the monster! You lost a treasure!")
            if treasures_collected > 0:
                treasures_collected -= 1
            else:
                print("You have no treasures to lose!")
        
        if encounters_faced >= 5:
            print("You've faced enough challenges. Time to escape with your treasures!")
            break
    
    print("Game Over!")
    print("You collected a total of {} treasures.".format(treasures_collected))

if __name__ == "__main__":
    main()
