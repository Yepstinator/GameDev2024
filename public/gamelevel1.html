<body id="myBody" style="background-repeat:repeat; background-size: 80%" background="myBackground01.jpg" onkeydown="{
    let myKey = event.key.toLowerCase();
    document.getElementById('myDiv01').innerHTML = myKey;

    // Controls for first image (WASD)
    if (myKey == 'd') {
        myVelocityX += 1;
    } 
    else if (myKey == 'a') {
        myVelocityX -= 1;
    }
    else if (myKey == 'w') {
        myVelocityY -= 3;
    }
    else if (myKey == 's') {
        myVelocityY += 1;
    }

}">

<h1 align=center>t4a01-game-template-with-wasd-by-fred</h1>
<br><br><br><br>

<script>
// Global variables
let myVelocityX = 0;
let myVelocityY = 0;
let myVelocityX2 = 0;
let myVelocityY2 = 0;
let myVelocityX3 = 0;
let myVelocityY3 = 0;
let friction = 0.1;
let gravitySpeed = 1.5;
let topBarrier = 10;

// Function to check if two elements are colliding
function myHitOther(my1, my2) {
    const elem1 = document.getElementById(my1).getBoundingClientRect();
    const elem2 = document.getElementById(my2).getBoundingClientRect();

    if (
        elem1.right >= elem2.left &&
        elem1.left <= elem2.right &&
        elem1.bottom >= elem2.top &&
        elem1.top <= elem2.bottom
    ) {
        return true;
    }
    return false;
}

function myCheckHit() {
    if (myHitOther('myImg01', 'myImg02')) {
        const img01 = document.getElementById('myImg01');
        const img02 = document.getElementById('myImg02');
        img02.style.left = img01.style.left;
        img02.style.top = img01.style.top;
    }

    if (myHitOther('myImg02', 'myImg03')) {
        const img02 = document.getElementById('myImg02');
        const img03 = document.getElementById('myImg03');
        img03.style.left = img02.style.left;
        img03.style.top = img02.style.top;
        window.location.href = "https://www.example.com";
    }
}

function initializePositions() {
    const screenHeight = window.innerHeight;
    const myImg01 = document.getElementById('myImg01');
    const myImg02 = document.getElementById('myImg02');
    const myImg03 = document.getElementById('myImg03');

    myImg01.style.top = `${screenHeight - myImg01.offsetHeight}px`;
    myImg02.style.top = `${screenHeight - myImg02.offsetHeight}px`;
    myImg03.style.top = `${screenHeight * 0.1}px`;
}

function updatePosition() {
    const myImg01 = document.getElementById('myImg01');
    const myImg02 = document.getElementById('myImg02');
    const myImg03 = document.getElementById('myImg03');
    const screenWidth = window.innerWidth;
    const screenHeight = window.innerHeight;

    // Update positions with barriers
    let newLeft1 = parseInt(myImg01.style.left || 0) + myVelocityX;
    let newTop1 = parseInt(myImg01.style.top || 0) + myVelocityY;

    myImg01.style.left = `${Math.max(0, Math.min(screenWidth - myImg01.offsetWidth, newLeft1))}px`;
    myImg01.style.top = `${Math.max(0, Math.min(screenHeight - myImg01.offsetHeight, newTop1))}px`;

    let newLeft2 = parseInt(myImg02.style.left || 0) + myVelocityX2;
    let newTop2 = parseInt(myImg02.style.top || 0) + myVelocityY2;

    myImg02.style.left = `${Math.max(0, Math.min(screenWidth - myImg02.offsetWidth, newLeft2))}px`;
    myImg02.style.top = `${Math.max(0, Math.min(screenHeight - myImg02.offsetHeight, newTop2))}px`;

    let newLeft3 = parseInt(myImg03.style.left || 0) + myVelocityX3;
    let newTop3 = parseInt(myImg03.style.top || 0) + myVelocityY3;

    myImg03.style.left = `${Math.max(0, Math.min(screenWidth - myImg03.offsetWidth, newLeft3))}px`;
    myImg03.style.top = `${Math.max(0, Math.min(screenHeight - myImg03.offsetHeight, newTop3))}px`;

    myCheckHit();
}

function applyGravity() {
    const myImg01 = document.getElementById('myImg01');
    const myImg02 = document.getElementById('myImg02');
    const screenHeight = window.innerHeight;

    if (parseInt(myImg01.style.top) + myImg01.offsetHeight < screenHeight) {
        myVelocityY += gravitySpeed;
    } else {
        myVelocityY = 0;
    }
    
    if (parseInt(myImg02.style.top) + myImg02.offsetHeight < screenHeight) {
        myVelocityY2 += gravitySpeed;
    } else {
        myVelocityY2 = 0;
    }
}

window.onload = initializePositions;
setInterval(applyGravity, 16);
setInterval(updatePosition, 16);
</script>

<img id="myImg01" style="position:absolute; width:100px; height:80px; left:50px;" src="myImage01.jpg">
<img id="myImg02" style="position:absolute; width:100px; height:80px; left:250px;" src="myImage02.jpg">
<img id="myImg03" style="position:absolute; width:100px; height:80px; left:400px;" src="myImage03.jpg">

<input type="button" value="Auto Background Left" onclick="{
   clearInterval(myClock);
   let myTemp = '100px 0px';
   myClock = setInterval(function(){
       myGlobalX -= 5;
       myTemp =  myGlobalX + 'px 0px';
       document.getElementById('myBody').style.backgroundPosition = myTemp;
   }, 100);
}">

<input type="button" value="Image Right Fast Button" onclick="{
   myVelocityX += 5;
   myCheckHit();
}"><br><br>

<div id="myDiv01" style="color:yellow">..</div>

</body>
